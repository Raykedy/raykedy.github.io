<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>2051: Алгоритм Пробуждение — Рэй Кеди</title>
<meta name="description" content="Официальная страница книги Рэй Кеди «2051: Алгоритм Пробуждение».">
<meta property="og:title" content="2051: Алгоритм Пробуждение — Рэй Кеди">
<meta property="og:description" content="Официальный хаб. Telegram, соцсети, покупка, Web3.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://raykedy.com/">

<style>
  html { min-height:100%; background:#000; }
  body {
    margin:0; min-height:100%; background:#000; color:#fff;
    font-family: Arial, sans-serif; overflow-y:auto;
  }

  /* Видеофон */
  #bgVideo{
    position:fixed; inset:0; width:100%; height:100%;
    object-fit:cover; z-index:0; pointer-events:none; background:#000;
  }

  /* Верхняя плашка (кнопка включения музыки) */
  .fixed-line-top{
    position:fixed; top:calc(8px + env(safe-area-inset-top)); left:50%; transform:translateX(-50%);
    z-index:3; color:#ffcc66; background:rgba(0,0,0,.45);
    padding:10px 16px; border-radius:12px; text-align:center;
    max-width:calc(100% - 24px); font-size:1.05rem; line-height:1.3;
    box-shadow:0 2px 10px rgba(0,0,0,.35);
    transition: opacity .4s ease;
  }
  .clickable{
    cursor:pointer;
    box-shadow:0 0 0 0 rgba(255,140,0,.7);
    animation:pulse 1.5s ease-in-out infinite;
  }
  @keyframes pulse{
    0%{ box-shadow:0 0 0 0 rgba(255,140,0,.7);}
    70%{ box-shadow:0 0 0 14px rgba(255,140,0,0);}
    100%{ box-shadow:0 0 0 0 rgba(255,140,0,0);}
  }
  .fixed-line-top.hide { opacity:0; pointer-events:none; }

  /* Страница */
  .page {
    position:relative; z-index:1; display:flex; flex-direction:column;
    min-height:100vh; padding: 28vh 16px 12vh; box-sizing:border-box;
  }

  .hero { text-align:center; margin: 0 auto 28px; max-width: 900px; }
  .hero h1 { margin:0 0 12px; font-size: 3rem; line-height:1.05; }
  .hero p  { margin:0 auto; max-width: 680px; font-size:1.2rem; opacity:.9; }

  /* Кнопки */
  .cta-wrap { width:min(440px,96%); margin:0 auto; }
  .cta-list { display:grid; grid-template-columns:1fr; gap:12px; }
  .cta{
    display:flex; align-items:center; justify-content:center;
    min-height:52px; padding:0 16px; border-radius:14px;
    background:rgba(5,15,20,.45); color:#e9faff; text-decoration:none; font-weight:700;
    border:1px solid rgba(180,240,255,.35); backdrop-filter: blur(4px);
    box-shadow: inset 0 0 12px rgba(120,220,255,.18), 0 6px 18px rgba(0,0,0,.35);
    text-shadow: 0 0 10px rgba(160,240,255,.5);
    transition: transform .15s ease, filter .25s ease;
  }
  .cta:hover{ transform:translateY(-2px); filter:brightness(1.08); }
  .cta.disabled{ pointer-events:none; opacity:.55; filter:grayscale(.3); }

  @media (max-width: 600px){
    .page{ padding-top: 26vh; }
    .hero h1{ font-size:2.2rem; }
    .hero p { font-size:1.05rem; }
  }
  @media (max-width: 380px){
    .page{ padding-top: 24vh; }
    .hero h1{ font-size:1.9rem; }
    .hero p { font-size:.98rem; }
  }
</style>
</head>
<body>

<!-- ВИДЕОФОН -->
<video id="bgVideo" autoplay muted playsinline loop preload="auto">
  <source src="https://raykedy.github.io/%D1%84%D0%BE%D0%BD%20%D1%81%D0%B0%D0%B9%D1%82%D0%B0.mp4?v=4" type="video/mp4">
</video>

<!-- МУЗЫКА -->
<audio id="bgMusic" preload="auto" loop>
  <source src="https://raw.githubusercontent.com/RayKedy/raykedy.github.io/main/motivational-adventure-cinematic-150072(2).mp3?v=3" type="audio/mpeg">
</audio>

<!-- ВЕРХНЯЯ ПЛАШКА -->
<div id="topBanner" class="fixed-line-top clickable" role="button" tabindex="0" aria-label="Включить звук">
  <div>Официальный хаб раздачи.</div>
  <div>Нажми сюда — включится музыка.</div>
</div>

<main class="page">
  <section class="hero">
    <h1>2051: Алгоритм Пробуждение</h1>
    <p>Погрузись в мир, где границы между разумом и кодом стираются.</p>
  </section>

  <!-- КНОПКИ -->
  <section class="cta-wrap" aria-label="Площадки книги">
    <div class="cta-list">
      <a class="cta disabled">Amazon — скоро</a>
      <a class="cta disabled">Google Books — скоро</a>
      <a class="cta disabled">Mirror — скоро</a>
      <a class="cta" href="https://t.me/raykedy2051" target="_blank" rel="noopener">Telegram</a>
      <a class="cta" href="https://bastyon.com/raykedy" target="_blank" rel="noopener">Bastyon</a>
      <a class="cta" href="https://youtube.com/@raykedy?si=zV6cvntxmkS8sNbw" target="_blank" rel="noopener">YouTube</a>
      <a class="cta" href="https://www.tiktok.com/@raykedy1" target="_blank" rel="noopener">TikTok</a>
      <a class="cta" href="https://t.me/Ray_Kedy" target="_blank" rel="noopener">Отправить сообщение</a>
    </div>
  </section>

  <div style="height:12vh;"></div>
</main>

<script>
(function () {
  const video  = document.getElementById('bgVideo');
  const audio  = document.getElementById('bgMusic');
  const banner = document.getElementById('topBanner');

  /* --- ВИДЕО: один аккуратный автозапуск без перезагрузок источника --- */
  function ensureVideoProps(){
    // Некоторые браузеры требуют именно свойства, не только атрибуты
    video.muted = true;
    video.loop = true;
    video.playsInline = true;
    video.autoplay = true;
  }
  ensureVideoProps();

  async function tryPlayVideo(){
    try { await video.play(); } catch(e) { /* ок, просто оставим попытку на user-gesture */ }
  }
  tryPlayVideo();

  // Если вкладка была в бэкграунде/видео не стартануло — при первом взаимодействии просто play(), без load()
  const kickVideoOnce = () => { ensureVideoProps(); video.play().catch(()=>{}); cleanup(); };
  function cleanup(){
    document.removeEventListener('pointerdown', kickVideoOnce, { passive:true });
    document.removeEventListener('keydown', kickVideoOnce);
    banner.removeEventListener('click', kickVideoOnce);
  }
  document.addEventListener('pointerdown', kickVideoOnce, { passive:true });
  document.addEventListener('keydown',   kickVideoOnce);
  // клик по баннеру тоже подстрахует видео (но не трогаем src)
  banner.addEventListener('click', kickVideoOnce);

  // Если браузер сам сообщил, что можно играть — просто дернём play ещё раз
  video.addEventListener('canplay', () => { if (video.paused) video.play().catch(()=>{}); });

  // На случай, если кто-то поставит паузу — при возврате на вкладку попробуем продолжить
  document.addEventListener('visibilitychange', () => {
    if (!document.hidden && video.paused) {
      ensureVideoProps();
      video.play().catch(()=>{});
    }
  });

  /* --- АУДИО: только по клику на плашку; видео не трогаем --- */
  function fadeIn(target=1, step=0.03, interval=100){
    let v = audio.volume || 0;
    const id = setInterval(()=>{
      v = Math.min(target, v + step);
      audio.volume = v;
      if (v >= target) clearInterval(id);
    }, interval);
  }

  async function playAudio(){
    try {
      audio.volume = 0;
      await audio.play();
      fadeIn(1, 0.03, 100);
      banner.innerHTML = '<div>Музыка включена ✅</div>';
      banner.classList.remove('clickable');
      setTimeout(()=> banner.classList.add('hide'), 800);
    } catch(e) {
      // Если браузер не дал — оставим кликабельной
      banner.classList.add('clickable');
    }
  }

  banner.classList.add('clickable');
  banner.addEventListener('click', playAudio);
  banner.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); playAudio(); }
  });
})();
</script>
</body>
</html>
