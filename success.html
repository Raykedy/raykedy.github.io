<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞ ‚Ä¢ 2051</title>

  <style>
    html { min-height:100%; background:#000; }
    body {
      margin:0; min-height:100%; background:#000; color:#e7eef7;
      font:16px/1.5 Arial, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, sans-serif;
      overflow-y:auto;
    }

    /* –í–ò–î–ï–û–§–û–ù ‚Äî –∫–∞–∫ –Ω–∞ cryptopay */
    #bgVideo{
      position:fixed; inset:0; width:100%; height:100%;
      object-fit:cover; z-index:0; pointer-events:none; background:#000;
    }

    /* –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ */
    .page { position:relative; z-index:1; min-height:100vh; display:grid; place-items:center; padding:20px; box-sizing:border-box; }
    .card{
      width:min(560px, 96%); background:rgba(8,12,18,.78);
      border:1px solid rgba(180,240,255,.25); border-radius:16px; padding:22px 20px;
      box-shadow:0 10px 40px rgba(0,0,0,.45); backdrop-filter: blur(6px);
      text-align:center; /* –≤—Å—ë –ø–æ —Ü–µ–Ω—Ç—Ä—É */
    }
    h1{ margin:0 0 10px; font-size:22px; }
    p{ margin:0 0 10px; }
    .muted{ color:#bcd0e0; }

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:12px 14px; border-radius:12px; border:0; cursor:pointer; font-weight:700;
      background:#233142; color:#dbe8f5; transition:transform .12s ease, filter .2s ease;
      width:100%;
    }
    .btn:hover{ transform:translateY(-1px); filter:brightness(1.05); }

    .note{ margin-top:10px; color:#9fb4c7; font-size:14px; }
    .ok{ margin-top:12px; color:#9ef; }
    .err{ margin-top:12px; color:#ff7a7a; display:none; }
    .err.show{ display:block; }

    @media (max-width:420px){
      .card{ padding:18px 14px; }
      h1{ font-size:20px; }
    }
  </style>
</head>
<body>

  <!-- –í–∏–¥–µ–æ –∫–∞–∫ –Ω–∞ –∫—Ä–∏–ø—Ç–æ–ø–µ–π -->
  <video id="bgVideo" autoplay muted loop playsinline preload="auto">
    <source src="https://raykedy.github.io/fastvideobackground_faststart.mp4" type="video/mp4">
  </video>

  <main class="page">
    <section class="card" aria-label="–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞">
      <h1>–°–ø–∞—Å–∏–±–æ! –ü–ª–∞—Ç—ë–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω</h1>
      <p class="muted">
        –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ e-mail. –ï—Å–ª–∏ –ø–∏—Å—å–º–∞ –Ω–µ—Ç –ø–∞—Ä—É –º–∏–Ω—É—Ç ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.<br>
        –°—Å—ã–ª–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ 1 —á–∞—Å. –ï—Å–ª–∏ –ø–∏—Å—å–º–∞ –Ω–µ—Ç –≤–æ ¬´–í—Ö–æ–¥—è—â–∏—Ö¬ª, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–ø–∫–∏ ¬´–ü—Ä–æ–º–æ–∞–∫—Ü–∏–∏¬ª –∏ ¬´–°–ø–∞–º¬ª.
      </p>

      <button id="resendBtn" class="btn">üìß –ü–µ—Ä–µ—Å–ª–∞—Ç—å –ø–∏—Å—å–º–æ</button>

      <div id="msg" class="ok" hidden>–ì–æ—Ç–æ–≤–æ: —Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ—á—Ç—É.</div>
      <div id="err" class="err"></div>
    </section>
  </main>

  <script>
    const params   = new URLSearchParams(location.search);
    const orderId  = params.get('order') || '';
    const resendBtn= document.getElementById('resendBtn');
    const msg      = document.getElementById('msg');
    const err      = document.getElementById('err');

    function show(el, text){ el.textContent = text; el.hidden = !text; }
    function showErr(text){ err.textContent = text; err.classList.add('show'); }
    function clearErr(){ err.textContent = ''; err.classList.remove('show'); }

    // –†—É—á–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ –ø–∏—Å—å–º–∞ ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    resendBtn.addEventListener('click', async ()=>{
      resendBtn.disabled = true; clearErr(); show(msg,'');
      try{
        const email = prompt('–£–∫–∞–∂–∏—Ç–µ e-mail, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É:');
        if (!email){ resendBtn.disabled = false; return; }

        const r = await fetch('/api/resend', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ orderId, email })
        });
        const d = await r.json();
        if (d.ok) show(msg, '–ì–æ—Ç–æ–≤–æ: —Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ—á—Ç—É.');
        else showErr('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
      }catch(e){
        showErr('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
      }finally{
        resendBtn.disabled = false;
      }
    });
  </script>

</body>
</html>
