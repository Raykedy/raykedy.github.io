<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞ ‚Ä¢ 2051</title>
  <style>
    :root { --bg:#0b0f14; --card:#111820; --text:#e7eef7; --muted:#9bb0c3; }
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:20px}
    .card{width:100%;max-width:560px;background:var(--card);border:1px solid #1b2633;border-radius:16px;padding:24px;box-shadow:0 10px 40px rgba(0,0,0,.35)}
    h1{margin:0 0 8px;font-size:20px}
    p{margin:0 0 10px}
    .muted{color:var(--muted)}
    button.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 14px;border-radius:10px;border:0;background:#233142;color:#dbe8f5;cursor:pointer}
    button.btn:hover{background:#2b415d}
    .note{margin-top:10px;color:#9ab;font-size:14px}
    .ok{margin-top:12px;color:#9ef}
    .err{margin-top:12px;color:#f66}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–°–ø–∞—Å–∏–±–æ! –ü–ª–∞—Ç—ë–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω</h1>
      <p class="muted">–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ e-mail. –ï—Å–ª–∏ –ø–∏—Å—å–º–∞ –Ω–µ—Ç –ø–∞—Ä—É –º–∏–Ω—É—Ç ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.</p>

      <button id="resendBtn" class="btn">üìß –ü–µ—Ä–µ—Å–ª–∞—Ç—å –ø–∏—Å—å–º–æ</button>

      <p class="note">–°—Å—ã–ª–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ 1 —á–∞—Å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ¬´–í—Ö–æ–¥—è—â–∏–µ¬ª, ¬´–ü—Ä–æ–º–æ–∞–∫—Ü–∏–∏¬ª –∏ ¬´–°–ø–∞–º¬ª.</p>
      <div id="msg" class="ok" hidden>–ì–æ—Ç–æ–≤–æ: —Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ—á—Ç—É.</div>
      <div id="err" class="err" hidden></div>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(location.search);
    const orderId = params.get('order') || '';
    const resendBtn = document.getElementById('resendBtn');
    const msg = document.getElementById('msg');
    const err = document.getElementById('err');
    function show(el, text){ el.textContent=text; el.hidden=!text; }

    // –¢–æ–ª—å–∫–æ —Ä—É—á–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ –ø–∏—Å—å–º–∞ ‚Äî –±–µ–∑ –∞–≤—Ç–æ—Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –±–µ–∑ –∞–≤—Ç–æ–ø–∏–Ω–≥–∞
    resendBtn.addEventListener('click', async ()=>{
      resendBtn.disabled = true; show(err,''); show(msg,'');
      try{
        const email = prompt('–£–∫–∞–∂–∏—Ç–µ e-mail, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É:');
        if (!email){ resendBtn.disabled = false; return; }
        const r = await fetch('/api/resend', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ orderId, email })
        });
        const d = await r.json();
        if (d.ok) show(msg, '–ì–æ—Ç–æ–≤–æ: —Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –ø–æ—á—Ç—É.');
        else show(err, '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
      }catch(e){
        show(err, '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
      }finally{
        resendBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
